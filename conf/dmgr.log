[2021/09/05 18:52:23.788 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/05 18:52:23.788 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.206\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/05 18:52:27.877 +08:00] [FATAL] [main.go:57] ["mysql sync error"] [error="create task table struct failed, err: Error 1071: Specified key was too long; max key length is 3072 bytes\n"] [errorVerbose="create task table struct failed, err: Error 1071: Specified key was too long; max key length is 3072 bytes\n\ngithub.com/wentaojin/dmgr/service.SyncMysqlEngineDB\n\t/Users/marvin/gostore/dmgr/service/db.go:47\nmain.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:56\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1130"] [stack="main.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:57\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225"]
[2021/09/05 18:54:54.447 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/05 18:54:54.448 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.206\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/05 18:54:55.909 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/05 18:54:55.910 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/05 18:54:55.910 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/05 18:54:55.910 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/05 19:06:59.566 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/05 19:06:59.567 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.206\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/05 19:07:00.056 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/05 19:07:00.057 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/05 19:07:00.057 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/05 19:07:00.057 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/05 19:56:46.921 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/05 19:56:46.921 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.206\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/05 19:56:47.413 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/05 19:56:47.414 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/05 19:56:47.414 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/05 19:56:47.414 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/08 22:57:26.556 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/08 22:57:26.558 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/08 22:57:26.605 +08:00] [FATAL] [main.go:54] ["mysql open error"] [error="connect server failed, err: dial tcp 172.16.4.207:4000: connect: connection refused\n"] [errorVerbose="connect server failed, err: dial tcp 172.16.4.207:4000: connect: connection refused\n\ngithub.com/wentaojin/dmgr/service.NewMySQLEngineDB\n\t/Users/marvin/gostore/dmgr/service/db.go:35\nmain.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:53\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1130"] [stack="main.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:54\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225"]
[2021/09/08 23:07:02.769 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/08 23:07:02.769 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/08 23:07:02.978 +08:00] [FATAL] [main.go:54] ["mysql open error"] [error="connect server failed, err: Error 1049: Unknown database 'dmgr'\n"] [errorVerbose="connect server failed, err: Error 1049: Unknown database 'dmgr'\n\ngithub.com/wentaojin/dmgr/service.NewMySQLEngineDB\n\t/Users/marvin/gostore/dmgr/service/db.go:35\nmain.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:53\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1130"] [stack="main.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:54\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225"]
[2021/09/08 23:07:25.855 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/08 23:07:25.856 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/08 23:07:26.883 +08:00] [FATAL] [main.go:57] ["mysql sync error"] [error="create task table struct failed, err: Error 1071: Specified key was too long; max key length is 3072 bytes\n"] [errorVerbose="create task table struct failed, err: Error 1071: Specified key was too long; max key length is 3072 bytes\n\ngithub.com/wentaojin/dmgr/service.SyncMysqlEngineDB\n\t/Users/marvin/gostore/dmgr/service/db.go:47\nmain.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:56\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1130"] [stack="main.main\n\t/Users/marvin/gostore/dmgr/cmd/main.go:57\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:225"]
[2021/09/08 23:10:09.745 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/08 23:10:09.745 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/08 23:10:11.297 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/08 23:10:11.298 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/08 23:10:11.298 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/08 23:10:11.298 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/08 23:21:33.838 +08:00] [INFO] [logger.go:73] [/v1/login] [status=200] [method=POST] [path=/v1/login] [query=] [ip=192.168.1.101] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=101.817ms]
[2021/09/08 23:22:27.097 +08:00] [INFO] [logger.go:73] [/v1/machine/add] [status=200] [method=POST] [path=/v1/machine/add] [query=] [ip=192.168.1.101] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=115.085375ms]
[2021/09/08 23:22:33.318 +08:00] [INFO] [logger.go:73] [/v1/machine/add] [status=200] [method=POST] [path=/v1/machine/add] [query=] [ip=192.168.1.101] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=106.629542ms]
[2021/09/08 23:22:41.662 +08:00] [INFO] [logger.go:73] [/v1/machine/add] [status=200] [method=POST] [path=/v1/machine/add] [query=] [ip=192.168.1.101] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=102.978083ms]
[2021/09/09 23:27:22.741 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:27:22.742 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:27:23.235 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:27:23.236 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:27:23.236 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:27:23.236 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:28:41.501 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:28:41.501 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:28:41.979 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:28:41.979 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:28:41.980 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:28:41.980 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:29:30.163 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="mkdir /home/marvin: operation not supported"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1031\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:29:30.165 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: mkdir /home/marvin: operation not supported\n"] [cost=456.852792ms]
[2021/09/09 23:31:15.861 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:31:15.861 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:31:16.336 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:31:16.336 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:31:16.336 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:31:16.336 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:31:18.894 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=337.835417ms]
[2021/09/09 23:31:43.258 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=319.409625ms]
[2021/09/09 23:32:19.479 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:32:19.480 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:32:19.948 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:32:19.949 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:32:19.949 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:32:19.949 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:32:21.278 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=338.056458ms]
[2021/09/09 23:32:33.926 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=329.769083ms]
[2021/09/09 23:32:45.980 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=313.126334ms]
[2021/09/09 23:34:05.868 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:34:05.868 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:34:06.337 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:34:06.337 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:34:06.337 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:34:06.337 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:34:08.970 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:34:08.971 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1] not exists in the component\n"] [cost=320.390958ms]
[2021/09/09 23:34:18.834 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=322.653417ms]
[2021/09/09 23:34:21.261 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=318.677291ms]
[2021/09/09 23:34:28.564 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:34:28.564 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=319.83725ms]
[2021/09/09 23:34:50.209 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=323.888833ms]
[2021/09/09 23:34:55.586 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors=] [cost=314.260125ms]
[2021/09/09 23:35:10.684 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master2 dm-master1] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:35:10.684 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master2 dm-master1] not exists in the component\n"] [cost=315.554208ms]
[2021/09/09 23:35:14.786 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:35:14.786 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=327.883042ms]
[2021/09/09 23:35:16.440 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:35:16.441 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=320.779792ms]
[2021/09/09 23:35:18.164 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:35:18.164 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=321.79525ms]
[2021/09/09 23:35:20.024 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:35:20.025 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=321.546333ms]
[2021/09/09 23:35:58.714 +08:00] [INFO] [version.go:43] ["Welcome to dmgr"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.16.7]
[2021/09/09 23:35:58.715 +08:00] [INFO] [version.go:50] ["dmgr config"] [config="{\"listen-port\":\":9527\",\"db\":{\"host\":\"172.16.4.207\",\"port\":4000,\"user\":\"root\",\"password\":\"\",\"db-name\":\"dmgr\"},\"log\":{\"log-level\":\"info\",\"log-file\":\"./conf/dmgr.log\",\"max-size\":128,\"max-age\":7,\"max-backups\":30},\"MiddlewareConfig\":{\"max-rate-limiter\":30,\"jwt-realm\":\"marvin\",\"jwt-key\":\"pingcap\",\"jwt-timeout\":24,\"jwt-max-refresh\":24}}"]
[2021/09/09 23:35:59.195 +08:00] [INFO] [router.go:56] ["middleware init-validator"] [success="init middleware validator success"]
[2021/09/09 23:35:59.195 +08:00] [INFO] [router.go:60] ["middleware rate-limiter"] [success="init middleware rate limiter success"]
[2021/09/09 23:35:59.195 +08:00] [INFO] [router.go:64] ["middleware cross-domain"] [success="init gin request cross-domain success"]
[2021/09/09 23:35:59.196 +08:00] [INFO] [router.go:71] ["middleware jwt-auth"] [success="init jwt auth middleware success"]
[2021/09/09 23:36:01.318 +08:00] [ERROR] [response.go:70] ["gin api request error"] [error="request component instance [dm-master1 dm-master2] not exists in the component"] [stack="github.com/wentaojin/dmgr/response.FailWithMsg\n\t/Users/marvin/gostore/dmgr/response/response.go:70\ngithub.com/wentaojin/dmgr/router/v1.ClusterPatch\n\t/Users/marvin/gostore/dmgr/router/v1/topology.go:1096\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).middlewareImpl\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:403\ngithub.com/appleboy/gin-jwt/v2.(*GinJWTMiddleware).MiddlewareFunc.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/appleboy/gin-jwt/v2@v2.6.4/auth_jwt.go:365\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/middleware.Cors.func1\n\t/Users/marvin/gostore/dmgr/pkg/middleware/cors.go:39\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.(*Middleware).Handle\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:64\ngithub.com/ulule/limiter/v3/drivers/middleware/gin.NewMiddleware.func1\n\t/Users/marvin/appstore/go/pkg/mod/github.com/ulule/limiter/v3@v3.8.0/drivers/middleware/gin/middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/response.GinRecovery.func1\n\t/Users/marvin/gostore/dmgr/response/response.go:129\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/wentaojin/dmgr/pkg/dmgrutil.GinLogger.func1\n\t/Users/marvin/gostore/dmgr/pkg/dmgrutil/logger.go:70\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/marvin/appstore/go/pkg/mod/github.com/gin-gonic/gin@v1.7.2/gin.go:445\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2867\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:1932"]
[2021/09/09 23:36:01.318 +08:00] [INFO] [logger.go:73] [/v1/cluster/patch] [status=200] [method=POST] [path=/v1/cluster/patch] [query=] [ip=127.0.0.1] [user-agent="ApiPOST Runtime +https://www.apipost.cn"] [errors="Error #01: request component instance [dm-master1 dm-master2] not exists in the component\n"] [cost=318.898083ms]
